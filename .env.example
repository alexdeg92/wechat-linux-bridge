# ── Required ──────────────────────────────────────────────────────────────────

# Your Wine prefix path (where WeChat is installed)
WINEPREFIX=~/.wechat-wine

# Full path to WeChat.exe inside your Wine prefix
WECHAT_EXE_PATH=~/.wechat-wine/drive_c/Program Files (x86)/Tencent/WeChat/[3.9.2.23]/WeChat.exe

# Your own WeChat ID (used to filter out self-sent messages)
SELF_WXID=wxid_xxxxxxxxxxxxxxxx

# X display for Wine (Xvfb or real display)
DISPLAY=:99

# ── DLL paths ─────────────────────────────────────────────────────────────────

# Path to inject2.exe (Win32 DLL injector, run via wine)
INJECT_EXE=./bin/inject2.exe

# Path to wxsend.dll (the hook DLL, injected into WeChat)
WXSEND_DLL=./bin/wxsend.dll

# ── WeChat HTTP ports ─────────────────────────────────────────────────────────

# Port wxsend.dll listens on inside WeChat (send commands from Python → DLL)
WXSEND_PORT=19088
WXSEND_URL=http://127.0.0.1:19088

# Port the Python webhook receiver listens on (DLL → Python)
WEBHOOK_HOST=0.0.0.0
WEBHOOK_PORT=19089
WEBHOOK_PATH=/webhook/message

# ── Message routing (optional) ────────────────────────────────────────────────

# URL of the AI gateway (e.g. OpenClaw gateway endpoint)
GATEWAY_URL=http://127.0.0.1:18789/tools/invoke

# Bearer token for the AI gateway
GATEWAY_TOKEN=your_gateway_token_here

# Session key prefix for routing WeChat messages to AI sessions
SESSION_PREFIX=agent:main:wechat:

# Timeout (seconds) waiting for AI session response
SESSIONS_SEND_TIMEOUT=60

# AI model to use for WeChat sessions (optional — gateway-specific)
WECHAT_MODEL=

# ── Group chat bot trigger ────────────────────────────────────────────────────

# Mention string that triggers the bot in group chats
BOT_MENTION=@YourBotName

# ── Contact name resolution (optional) ───────────────────────────────────────

# Path to WeChat's MicroMsg.db (SQLCipher encrypted SQLite)
# The key is extracted from WeChat process memory at runtime
MICRO_DB=~/.wechat-wine/drive_c/users/YOUR_WINDOWS_USER/Documents/WeChat Files/YOUR_WXID/Msg/MicroMsg.db

# WeChat version (for correct memory offsets when extracting SQLCipher key)
WECHAT_VERSION=3.9.2.23

# ── Logging & paths ───────────────────────────────────────────────────────────

# Log file path
LOG_FILE=/var/log/wechat_webhook.log

# Incoming messages shared file (written by DLL, read by Python via inotify)
INCOMING_FILE=/tmp/wechat_incoming.jsonl

# Temp directory for media files
MEDIA_TEMP_DIR=/tmp/wechat_media
